<div class="card">
  <div class="card-header p-0 mx-3 mt-3 position-relative z-index-1">
    <span class="h1">ร้านค้าดอกไม้</span>
    <button type="button" class="btn btn-sm btn-success float-right" onclick="butt.store_create()">เริ่มขายสินค้า</button>
    <button type="button" class="btn btn-sm btn-warning float-right" onclick="butt.flower_edit()">จัดการสินค้า</button>
    <br>
  </div>
  <div class="card-body">
    <div class="row" id="flower_list">
    </div>
  </div>
</div>
<script>
  var f_id
  setTimeout(() => {
    flower_show.flower_list();
  }, 100);
  var flower_show = {
    flower_list: () => {
              $.get(route_address+'/api/flower_list', function(data, textStatus, xhr) {
                  if (data.status) {
                      document.getElementById("flower_list").innerHTML = ``;
                      items = data.items;
                      for (var i = 0; i < items.length; i++) {
                        price = items[i].price_100 / 100 + "-" + items[i].price_g
                          let div_item = document.createElement("div");
                          div_item.setAttribute("class","col-12 col-md-3 col-lg-3")
                          div_item.innerHTML = `
    <div class="card">
      <div class="card-header p-0 mx-3 mt-3 position-relative z-index-1"  style="height:200px;">
        <a href="javascript:;" class="d-block">
          <img src="assets/user_upload/`+ items[i].image +`" class="img-cover3 border-radius-lg">
        </a>
      </div>
    
      <div class="card-body pt-2">
        <a href="javascript:;" class="card-title h4 d-block text-darker">
          `+ items[i].breeder +`: `+ items[i].name +`
        </a>
        <h4>`+ price +`THB / G</h4>
          <span>THC: `+ items[i].thc +`%</span>
          <div class="progress">
            <div class="progress-bar bg-warning" role="progressbar" aria-valuenow="`+ items[i].thc +`" aria-valuemin="0" aria-valuemax="100" style="width: `+ items[i].thc +`%;"></div>
          </div>
        <div class="author align-items-center">
          <div class="name ps-3">
            <span>พ่อค้า: <span class="text-gradient text-primary text-uppercase text-xs font-weight-bold my-2">`+ items[i].username +`</span></span>
          </div>
          <button class="btn btn-sm btn-success btn-block"  data-toggle="modal" data-target="#flower_reader" onclick="flower_show.flower_read(`+ items[i].id +`)">สั่งซื้อ</button>
        </div>
      </div>
    </div>`;
                          document.getElementById("flower_list").append(div_item);
                      }
                  } else {
                  }
              });
          },
          flower_read: (ids) => {
              $.get(route_address+'/api/flower_read?id='+ids, function(data, textStatus, xhr) {
                  if (data.status) {
                      setTimeout(() => {
                        document.getElementById("strain_info").innerHTML = ``;
                      items = data.items[0];
                      console.log(items)
                        let type
                        if(items.type == 1){
                          type = "Indoor"
                        }else{
                          type = "Outdoor"
                        }
                        let div_item = document.createElement("div");
                          div_item.innerHTML = `<div class="card-header pb-0 text-left">
              <span class="h3">`+ items.breeder +`: `+ items.name +`</span><button class="float-right btn btn-sm btn-danger" onclick="$('#flower_reader').modal('hide');">ปิด</button><br>
              <br>
            </div>
            <div class="card-body">
              <img src="assets/user_upload/`+ items.image +`" class="img-cover1 border-radius-lg"><br><br>
              <div class="row">
                <div class="col-md-6">
                  <b>ชื่อสายพันธุ์:</b> `+ items.name +`<br>
                  <b>ค่ายเมล็ด:</b> `+ items.breeder +`<br>
                  <b>ประเภทการปลูก:</b> `+ type +`<br>
                  <b>รายละเอียด:</b> `+ items.information +`
                </div>
                <div class="col-md-6">
                  <b>THC:</b> `+ items.thc +`%<br>
                  <div class="progress">
                    <div class="progress-bar bg-warning" role="progressbar" aria-valuenow="`+ items.thc +`" aria-valuemin="0" aria-valuemax="100" style="width:`+ items.thc +`%;"></div>
                  </div>
                  <b>CBD:</b> `+ items.cbd +`%<br>
                  <div class="progress">
                    <div class="progress-bar bg-info" role="progressbar" aria-valuenow="`+ items.cbd +`" aria-valuemin="0" aria-valuemax="100" style="width:`+ items.cbd +`%;"></div>
                  </div>
                </div>
              </div>
                <hr>
              <div class="row">
                <div class="col-md-6">
                  <b>ราคาต่อ 1 กรัม:</b> `+ items.price_g +` THB<br>
                  <b>ราคาต่อ 30 กรัม:</b> `+ items.price_30 +` THB<br>
                  <b>ราคาต่อ 100 กรัม:</b> `+ items.price_100 +` THB<br>
                </div>
                <div class="col-md-6">
                  <b>ค่าจัดส่ง:</b> `+ items.ship +` THB<br>
                  <b>ติดต่อ:</b> ช่องทางการติดต่อสั่งซื้อ<br>
                  <b>ผู้ขาย:</b> `+ items.username +`
                </div>
              </div>
            </div>`
                          document.getElementById("strain_info").append(div_item);
                      }, 100);} else {
                  }
              });
          },
  }
</script>