<script src="../../assets/vendor/bootstrap/dist/js/bootstrap.bundle.min.js">
</script>
<script src="../../assets/vendor/js-cookie/js.cookie.js"></script>
<script src="../../assets/vendor/jquery.scrollbar/jquery.scrollbar.min.js"></script>
<script src="../../assets/vendor/jquery-scroll-lock/dist/jquery-scrollLock.min.js"></script>
<!-- Optional JS -->
<script src="../../assets/vendor/chart.js/dist/Chart.min.js"></script>
<script src="../../assets/vendor/chart.js/dist/Chart.extension.js"></script>
<!-- Argon JS -->
<script src="../../assets/js/argon.js?v=1.2.0"></script>
<script src="https://kit.fontawesome.com/b79b71ec57.js" crossorigin="anonymous"></script>
</script>
<!-- <script src="../../assets/js/core/popper.min.js" type="text/javascript">
</script>  -->
</script>
<script src="../../assets/js/now-ui-kit.js?v=1.1.0" type="text/javascript">
</script>
<script>
    if (window.location.href.indexOf("article_create") > -1) {
        unactivce_menu("articles_menu")
        $(function() {
            $("#content").load(route_address+"/html/article_create.html");
        });
    } else if (window.location.href.indexOf("articles_read") > -1) {
        console.log("here2")
        unactivce_menu("articles_menu")
        $(function() {
            $("#content").load(route_address+"/html/article_read.html");
        });
    } else if (window.location.href.indexOf("articles") > -1) {
        unactivce_menu("articles_menu")
        $(function() {
            $("#content").load(route_address+"/html/articles.html");
        });
    } else if (window.location.href.indexOf("diaries_create") > -1) {
        unactivce_menu("diaries_menu")
        $(function() {
            $("#content").load(route_address+"/html/diaries_create.html");
        });
    } else if (window.location.href.indexOf("diaries_read") > -1) {
        console.log("here2")
        unactivce_menu("diaries_menu")
        $(function() {
            $("#content").load(route_address+"/html/diaries_read.html");
        });
    }else if (window.location.href.indexOf("diaries") > -1) {
        unactivce_menu("diaries_menu")
        $(function() {
            $("#content").load(route_address+"/html/diaries.html");
        });
    } else if (window.location.href.indexOf("store_create") > -1) {
        unactivce_menu("store_menu")
        $(function() {
            $("#content").load(route_address+"/html/store_create.html");
        });
    } else if (window.location.href.indexOf("store") > -1) {
        unactivce_menu("store_menu")
        $(function() {
            $("#content").load(route_address+"/html/store.html");
        });
    } else {
        console.log("here")
        unactivce_menu("index_menu")
        $(function() {
            $("#content").load(route_address+"/html/main.html");
        });
    }

    function unactivce_menu(menu) {
        $("#index_menu").removeClass("active")
        $("#articles_menu").removeClass("active")
        $("#Diarie_menu").removeClass("active")
        $("#match_menu").removeClass("active")
        $("#store_menu").removeClass("active")

        $("#" + menu).addClass("active")
    }
</script>
<script>
    function setCookie(cname, cvalue, exdays) {
        var d = new Date();
        d.setTime(d.getTime() + (exdays * 60 * 60 * 1000));
        var expires = "expires=" + d.toUTCString();
        document.cookie = cname + "=" + cvalue + ";" + expires + ";path=/";
    }

    function getCookie(cname) {
        var name = cname + "=";
        var decodedCookie = decodeURIComponent(document.cookie);
        var ca = decodedCookie.split(';');
        for (let i = 0; i < ca.length; i++) {
            var c = ca[i];
            while (c.charAt(0) == ' ') {
                c = c.substring(1);
            }
            if (c.indexOf(name) == 0) {
                return c.substring(name.length, c.length);
            }
        }
        return "";
    }
</script>
<script>
    setTimeout(() => {
        butt.already_login();
    }, 100);
    var socket = io('master-grower-th.com', {
        allowEIO3: true,
        reconnection: true,
        autoConnect: true,
        transports: ['polling']
    });
    socket.on('authenticated', function() {})
    socket.on('unauthorized', function(msg) {
        setCookie("FUCKCOOK", "", 1)
        toastem.show('danger', "Cookie Fail");
        return true
    })
    setInterval(() => {
        butt.already_login();
    }, 5000);
    var butt = {
        login_block: () => {
            $("#login_block").show();
            $("#register_block").hide();
        },
        register_block: () => {
            $("#login_block").hide();
            $("#register_block").show();
        },
        already_login: () => {
            if (getCookie("FUCKCOOK") != "") {
                $("#login_register_butt").hide();
                $("#logout_butt").show();
            } else {
                $("#login_register_butt").show();
                $("#logout_butt").hide();
            }
        },
        article_create: () => {
            if (getCookie("FUCKCOOK") != "") {
                window.location = route_address+"/article_create";
            } else {
                toastem.show('danger', "กรุณาเข้าสู่ระบบหรือสมัครสมาชิคก่อน");
            }
        },
        diaries_create: () => {
            if (getCookie("FUCKCOOK") != "") {
                window.location = route_address+"/diaries_create";
            } else {
                toastem.show('danger', "กรุณาเข้าสู่ระบบหรือสมัครสมาชิคก่อน");
            }
        },
        store_create: () => {
            if (getCookie("FUCKCOOK") != "") {
                window.location = route_address+"/store_create";
            } else {
                toastem.show('danger', "กรุณาเข้าสู่ระบบหรือสมัครสมาชิคก่อน");
            }
        }
    }
    var apps = {
        register: () => {
            let username = $('#reg_username').val();
            let pass1 = $('#reg_pass1').val();
            let pass2 = $('#reg_pass2').val();
            let facebook = $('#reg_facebook').val();
            $.get(route_address+'/api/register?username=' + username + '&pass1=' + pass1 + '&pass2=' + pass2 + '&facebook=' + facebook, function(data, textStatus, xhr) {
                if (data.status) {
                    toastem.show('success', data.text);
                } else {
                    toastem.show('danger', data.text);
                }
            })
        },
        logining: () => {
            console.log("asdsadasd")
            let username = $('#log_username').val();
            let password = $('#log_password').val();
            $.get(route_address+'/api/login?username=' + username + '&password=' + password, function(data, textStatus, xhr) {
                if (data.status) {
                    setCookie("FUCKCOOK", data.cookie, 0.5)
                    setCookie("jwt", data.token, 0.5)
                    setCookie("steam_name", data.steam_name, 0.5)
                    toastem.show('success', "Login success");
                    var socket = io({
                        reconnection: true,
                        autoConnect: true
                    });
                    socket.on('authenticated', function() {
                        socket.on(getCookie("FUCKCOOK"), function(data) {});
                    })
                    socket.emit('authenticate', {
                        token: getCookie("jwt")
                    });
                    setTimeout(() => {
                        location.reload();
                    }, 1000)
                } else {
                    toastem.show('danger', data.text);
                }
            })
        },
        logouting: () => {
            setCookie("FUCKCOOK", "", 1)
            toastem.show('danger', "ออกจากระบบ สำเร็จ");
            setTimeout(() => {
                location.reload();
            }, 1000)
            return true
        },
    }
</script>
<script>
  var getUrlParameter = function getUrlParameter(sParam) {
    var sPageURL = window.location.search.substring(1),
        sURLVariables = sPageURL.split('&'),
        sParameterName,
        i;

    for (i = 0; i < sURLVariables.length; i++) {
        sParameterName = sURLVariables[i].split('=');

        if (sParameterName[0] === sParam) {
            return sParameterName[1] === undefined ? true : decodeURIComponent(sParameterName[1]);
        }
    }
    return false;
};
function sidebar(){
    setTimeout(() => {
        document.getElementById("sidenav-main").style.transform = "translateX(0px)";
    }, 10);
}
 $(document).mouseup(function(e) 
{
    $(function() {      
    let isMobile = window.matchMedia("only screen and (max-width: 760px)").matches;

    if (isMobile) {
    document.getElementById("sidenav-main").style.transform = "translateX(-250px)";

        //Conditional script here
    }
 });
});
</script>